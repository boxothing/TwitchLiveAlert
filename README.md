# 트위치 생방 알리미

## [생방알리미 v2.4 다운로드](https://github.com/boxothing/TwitchLiveAlert/releases/download/v2.4/TwitchLiveAlert-2.4.zip)

![썸네일 모드](https://i.imgur.com/WAZiAGw.jpg)

![윈도우 알림](https://i.imgur.com/T9NzrWl.png)

# 소개 및 주요 기능

트위치 생방알리미는 파이썬(Python 3.7.9)을 기반으로 만들어진 알림 프로그램이에요

스트리머의 생방송 및 이런저런 변경 사항들을 빠르게 알려드려요

실행 파일은 PyInstaller로 제작 됐고 윈도우 64비트 환경에서만 작동해요

프로그램이 실행되지 않는 경우 MSVC++ 2015 Redistributable x64 런타임을 설치해 주세요
- [Microsoft Visual C++ 2015 Redistributable Package (x64)](https://www.microsoft.com/ko-KR/download/details.aspx?id=52685)

#### 생방송 알림

스트리머의 생방 알림을 텔레그램 문자 및 윈도우 알림(윈10 이상)으로 받으세요

알림을 받을 수 있는 개수나 시간 제한 같은 특별한 제약 없이 원하는 스트리머의 아이디만 입력하면 알림을 받을 수 있어요

프로그램을 실행하고 켜두면 일정 시간 간격으로 트위치 API를 이용해 생방 여부를 확인해요

일반 알림의 경우 보통 생방 시작 후 25초에서 3분 사이에 알림을 받고 (더 빠르거나 느릴 수 있어요!)

속성 알림의 경우 평균 10초에서 20초 사이에 알림을 받아요

해당 스트리머의 생방송 알림을 최대한 빨리 받고 싶은 경우 속성 알림을 이용해 주세요

다만 속성 알림의 경우 스트리머의 채널을 개별적으로 확인해기 때문에 트위치 API 서버에 무리가 갈수 있으니 목록은 30명을 초과하지 않도록 권장해요

#### 유저 아이디, 닉네임, 등급(제휴 파트너) 등 변경 사항 알림

생방알리미는 생방 여부와 별도로 유저의 아이디 변경, 닉네임 변경, 등급(제휴 파트너) 변경 등의 중대사항을 알려드려요

앞으로 놓치지 않고 누구보다 빠르게 구독도 할 수 있어요


# 사용 방법

텔레그램 알림을 받지 않고 윈도우 알림만 받을 경우 1번과 2번은 건너뛰고 3번부터 설정해 주세요

1. [텔레그램 봇 생성 방법](#텔레그램-봇-생성-방법)을 참고해 봇을 생성하고 토큰을 받아요

2. 봇을 만들고 해당 봇에게 먼저 대화를 시작해줘야 정상적으로 메시지를 전달 받을 수 있어요

3. [`알리미설정.ini` 설정](#알리미설정ini-설정-파일) 파일을 열어 설정해 주세요

4. [`[일반] 알림목록.txt` 목록](#일반-알림목록txt-목록-파일) 파일에 알림을 받을 스트리머의 아이디를 한줄에 한명씩 추가해 주세요


`알리미설정.ini` 파일이 없는 경우 `생방알리미.exe` 실행시 자동으로 생성 되어요

(`알리미설정.ini` 파일의 인코딩은 UTF-8로 유지해주세요. BOM 여부는 상관없어요)



텔레그램 사용 시 프로그램을 시작하고 정상작동 한다면 ***`트위치 생방알리미 시작!`*** 이라는 메시지를 텔레그램으로 받아요

(옵션에서 silentstart 가 참(True)인 경우 받지 않아요)

프로그램을 켜두면 주기적으로 설정된 스트리머들의 생방 여부를 검사하고 알림을 보내줘요

프로그램 콘솔창에서 1, 2, 3 을 누르면 각각 현재 방송 중인 목록, 확인 중인 속성 목록, 확인 중인 일반 목록을 볼 수 있어요




# 텔레그램 봇 생성 방법

![참고 이미지](https://i.imgur.com/soxLdbJ.jpg)


텔레그램에서 [BotFather](https://telegram.me/botfather)를 검색하고 `/start` 와 `/newbot` 명령어를 입력해 봇을 만들어 주세요

봇 이름과 봇 계정이름을 입력해 주세요 (여기서 봇 계정이름은 대소문자 구분 없이 ***bot***으로 끝나야 해요)

봇 계정 설정이 끝나면 아래와 같은 형식의 토큰 값을 보내 주는데 이 값을 복사해서 `알리미설정.ini` 파일의 `token` 항목에 넣어 주세요

`110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw`

**그리고 본인이 새로 만든 봇을 검색해서 먼저 아무 말이나 대화를 걸어 주세요**
**(봇을 특정 채널이나 그룹에 초대 한 경우 그 채널 또는 그룹에서도 대화를 시작해 주세요)**


# `알리미설정.ini` 설정 파일

```ini
[LiveAlertConfig]
token = 
clientid = 
userlist = [일반] 알림목록.txt
userpriority = [속성] 알림목록.txt
sendthumbnail = True
refreshdelay = 30
refreshpriority = 10
newalertsonly = True
alertchange = True
winnotify = True

silentstart = False
logconsole =
localtimezone = 
```

#### `token` 텔레그램 봇 생성 후 받은 토큰

사용하지 않는 경우 비워두세요

```ini
token = 110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw
```

#### `clientid` 텔레그램 클라이언트 아이디

필수 설정 사항은 아니며 설정하지 않은 경우 프로그램 실행시 자동으로 받아 와요

하지만 주기적으로 봇에게 말을 다시 걸어 줘야 정상 작동하기 때문에 클라이언트 아이디를 직접 설정해 주길 권장해요

프로그램 실행 시 콘솔창에 아래와 같이 본인의 기본 클라이언트 아이디와 봇이 참여한 채널/그룹의 클라이언트 아이디를 출력해 줘요

```ini
설정파일 로딩 완료!
--------------------------------------------------
텔레그램 클라이언트 아이디 목록
--------------------------------------------------
'기본' : 12345678
'채널이름1' : -987654321
'그룹이름2' : -111222333
--------------------------------------------------
[클라이언트 아이디]: 12345678
```

기본(개임메시지)가 아닌 채널 또는 그룹으로 메시지를 받고 싶으면 클라이언트 아이디를 꼭 설정해 주세요

(봇이 참여한 채널 또는 그룹이 목록에 안 뜨는 경우 먼저 봇 그리고 해당 채널 또는 그룹에서도 대화를 시작해 주세요!)
```ini
clientid = -987654321
```

#### `userlist` 일반 알리미 유저 목록 파일 이름

해당 파일에 알림을 받을 스트리머의 로그인 아이디를 한줄에 한명씩 추가해 주세요

이 목록은 실시간으로 수정이 반영되므로 프로그램 실행중 언제든지 추가 및 삭제가 가능해요
```ini
userlist = [일반] 알림목록.txt
```

알리미 실행 파일과 위치가 다를 경우 파일 전체 경로를 설정해 주세요
```ini
userlist = C:\Users\cooluser\Desktop\직박구리\레전드.txt
```

#### `userpriority` 속성 알리미 유저 목록 파일 이름

해당 파일에 알림을 받을 스트리머의 로그인 아이디를 한줄에 한명씩 추가해 주세요

이 목록은 실시간으로 수정이 반영되므로 프로그램 실행중 언제든지 추가 및 삭제가 가능해요
```ini
userpriority = [속성] 알림목록.txt
```

알리미 실행 파일과 위치가 다를 경우 파일 전체 경로를 설정해 주세요
```ini
userpriority = C:\Users\cooluser\Desktop\찌르레기\전설.txt
```

#### `sendthumbnail` 썸네일 사용 여부

텔레그램 문자에 방송 썸네일을 같이 전송해요 (썸네일 평균 용량은 20-40kb 정도해요)

속성 알림은 썸네일을 지원하지 않아요

썸네일을 포함한 메시지를 전송해요
```ini
sendthumbnail = True
```

썸네일 없이 메시지만 전송해요
```ini
sendthumbnail = False
```

#### `refreshdelay` 일반 목록 갱신 대기 시간(초)

트위치 API를 통해 생방송 여부를 확인하고 다음 확인 때까지 대기시간이에요

빠르게 재요청해도 서버에서 정보 업데이트를 바로 안 해주기 때문에 20~60초 사이의 딜레이를 권장해요

```ini
refreshdelay = 30
```

#### `refreshpriority` 속성 목록 갱신 대기 시간(초)

트위치 API를 통해 생방송 여부를 개별적으로 확인하고 다음 확인 때까지 대기시간이에요

서버에 부담을 줄이기 위해 10-20초 사이의 대기시간을 권장해요

```ini
refreshpriority = 10
```

#### `newalertsonly` 프로그램 시작시 진행중인 방송 알림 여부

프로그램 실행 후 새로운 방송만 알림을 받아요
```ini
newalertsonly = True
```

프로그램 실행 후 현재 진행중인 방송도 알림을 받아요
```ini
newalertsonly = False
```

#### `alertchange` 유저 변경 사항 알림 여부

유저의 아이디, 닉네임, 등급(제휴 파트너) 등 변경 사항을 알려드려요

변경 사항 알림을 받아요
```ini
alertchange = True
```

변경 사항 알림을 받지 않아요
```ini
alertchange = False
```

#### `winnotify` 윈도우 알림 여부 (윈10 이상만 지원)

방송 시작시 윈도우 알림을 받아요

윈도우 알림 기능을 사용해요
```ini
winnotify = True
```

윈도우 알림 기능을 사용하지 않아요
```ini
winnotify = False
```

#### `silentstart` 프로그램 시작 시 텔레그램 문자 알림 여부

프로그램 시작 시 메시지를 받아요
```ini
silentstart = False
```

프로그램 시작 시 메시지를 받지 않아요
```ini
silentstart = True
```

#### `logconsole` 프로그램 시작 시 텔레그램 문자 알림 여부

콩솔창의 출력 내용을 저장하지 않아요
```ini
logconsole = 
```

콩솔창의 출력 내용을 `console.log` 파일에 저장해요
```ini
logconsole = console.log
```

#### `localtimezone` 알림 표준 시간대 설정

알림 시간을 설정한 시간대로 표시해 줘요

설정 가능한 시간대 목록은 아래 링크에서 확인해 주세요
- [List of tz database time zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)

설정하지 않은 경우 현재 사용하는 시스템 시간으로 표시 되어요
```ini
localtimezone = 
```

LA 현지 시간으로 표시 되어요. (제가 LA에 있었을 때...)
```ini
localtimezone = America/Los_Angeles
```

# `[일반] 알림목록.txt` 목록 파일

해당 파일에 일반 알림을 받을 아이디를 한줄에 하나씩 입력해 주세요

```
starcraft_kr
lck_korea
playoverwatch_kr
teaminven
```

# `[속성] 알림목록.txt` 목록 파일

해당 파일에 속성으로 알림을 받을 아이디를 한줄에 하나씩 입력해 주세요

```
zilioner
noizemasta
kimpoong_official
hanryang1125
01_84
```
